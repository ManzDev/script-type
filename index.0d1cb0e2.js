import{Howl as e}from"https://cdn.skypack.dev/howler";var t="/script-type/leg.0011f18c.svg";class s extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get styles(){return"\n      .bar {\n        display: block;\n        width: var(--width, 150px);\n        height: var(--height, 15px);\n        border: 2px solid #fff;\n        background: #333;\n      }\n\n      :host(.off) {\n        opacity: 0;\n      }\n\n      .text {\n        text-align: center;\n        color: #fff;\n      }\n\n      .fill {\n        display: flex;\n        width: var(--loading-bar, 0%);\n        height: 100%;\n        background: var(--color, gold);\n        transition: width var(--duration, 3000ms) linear;\n      }\n    "}connectedCallback(){this.render()}setLoading(e,t=3e3,s="gold"){this.style.setProperty("--color",s),this.style.setProperty("--duration",`${t}ms`),this.style.setProperty("--loading-bar",`${e}%`)}setText(e){this.shadowRoot.querySelector(".text").textContent=e}render(){this.shadowRoot.innerHTML=`\n    <style>${s.styles}</style>\n    <div class="text"></div>\n    <div class="bar"><div class="fill"></div></div>`}}customElements.define("loading-bar",s);const n={html:"/script-type/html.c77b4301.svg",css:"/script-type/css.cdbefb20.svg",js:"/script-type/js.f822158b.svg",module:"/script-type/module.fc7e6502.svg"};class i extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.loadingProgress=0}static get styles(){return"\n      :host {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        width: 200px;\n        height: 300px;\n        position: relative;\n      }\n\n      .character {\n        width: 100%;\n        height: 100%;\n        clip-path: polygon(0 0, 100% 0, 100% var(--loading-progress, 0%), 0% var(--loading-progress, 0%));\n        transition: clip-path var(--loading-duration, 3s);\n      }\n\n      .logo {\n        height: 200px;\n        position: relative;\n        z-index: 5;\n        will-change: transform;\n      }\n\n      .feet {\n        display: block;\n        width: 50px;\n        height: 100px;\n        position: absolute;\n        bottom: 0;\n      }\n\n      .feet.left {\n        transform: scale(-1, 1);\n        left: 25%;\n      }\n\n      .feet.right {\n        left: 50%;\n      }\n\n      .feet path {\n        fill: none;\n        stroke: #000;\n        stroke-width: 4px;\n        stroke-linecap: round;\n      }\n\n      loading-bar {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        transition: opacity 0.5s;\n      }\n\n      loading-bar.off {\n        opacity: 0;\n      }\n\n      /* Transparent */\n\n      :host(.transparent) {\n        opacity: 0.25;\n      }\n\n      /* Status: idle */\n\n      :host(.idle) .logo {\n        animation: idle 0.5s infinite alternate;\n      }\n\n      :host(.idle) loading-bar {\n        opacity: 1;\n      }\n\n      @keyframes idle {\n        0% { transform: translate(0, 0); }\n        100% { transform: translate(0, 10px); }\n      }\n    "}connectedCallback(){var e;this.type=null!=(e=this.getAttribute("type"))?e:"html",this.render()}setLoading(e,t,s){this.shadowRoot.querySelector("loading-bar").setLoading(e,t,s)}setTransparent(e=!0){e?this.classList.add("transparent"):this.classList.remove("transparent")}disableBar(){this.shadowRoot.querySelector("loading-bar").classList.add("off")}setAppears(e,t=3e3){this.style.setProperty("--loading-duration",`${t}ms`),this.style.setProperty("--loading-progress",`${e}%`)}setStage(e){const t=this.shadowRoot.querySelector("loading-bar");t.classList.remove("off"),t.setText(e)}render(){const e=n[this.type];this.shadowRoot.innerHTML=`\n    <style>${i.styles}</style>\n    <loading-bar class="off"></loading-bar>\n    <div class="character">\n      <img class="logo" src="${e}" alt="${this.type}">\n      <img class="left feet" src="${t}" alt="right leg">\n      <img class="right feet" src="${t}" alt="right leg">\n    </div>\n    `}}customElements.define("web-character",i);class a extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}static get styles(){return"\n      :host {\n        display: inline-flex;\n        flex-direction: column;\n        font-size: 32px;\n        width: 160px;\n        height: 85px;\n        position: absolute;\n        top: 25px;\n        right: 50px;\n      }\n    "}connectedCallback(){this.render();const[e,t,s]=this.shadowRoot.querySelectorAll("input[name=volume]");e.addEventListener("click",(()=>this.setInput("music"))),t.addEventListener("click",(()=>this.setInput("sfx"))),s.addEventListener("click",(()=>this.setInput("off")))}setInput(e){const t=new CustomEvent("soundInputChange",{detail:e});this.dispatchEvent(t)}get value(){return this.shadowRoot.querySelector("input[name=volume]:checked").id}render(){this.shadowRoot.innerHTML=`\n    <style>${a.styles}</style>\n    <label for="music"><input id="music" name="volume" type="radio" checked> <span>Music+SFX</span></label>\n    <label for="sfx"><input id="sfx" name="volume" type="radio"> <span>Only SFX</span></label>\n    <label for="off"><input id="off" name="volume" type="radio"> <span>OFF</span></label>\n    `}}customElements.define("sound-input",a);const o=document.querySelector("sound-input"),l=(e=!0,t=!0)=>{r.volume(e?1:0),d.powerup.volume(t?1.5:0),d.error.volume(t?1:0),d.positive.volume(t?1:0),d.running.volume(t?1:0),d.end.volume(t?1:0),d.bubble.volume(t?1:0)};o.addEventListener("soundInputChange",(e=>{"music"===e.detail?l(!0,!0):"sfx"===e.detail?l(!1,!0):"off"===e.detail&&l(!1,!1)}));const r=new e({src:["boss-fight.mp3"],loop:!0,volume:.75}),d={powerup:new e({src:["power-up.mp3"],volume:1.5}),error:new e({src:["error.mp3"]}),positive:new e({src:["positive.mp3"]}),running:new e({src:["running.mp3"],loop:!0}),end:new e({src:["end.mp3"]}),bubble:new e({src:["bubble.mp3"]})},m=document.querySelector(".chars"),c=e=>{document.querySelector(".tag").innerHTML=e},[g,p,u,h,y]=document.querySelectorAll(".buttons button");p.addEventListener("click",(()=>M())),g.addEventListener("click",(()=>q())),u.addEventListener("click",(()=>$())),h.addEventListener("click",(()=>H())),y.addEventListener("click",(()=>R()));const f=()=>{g.disabled=!0,p.disabled=!0,u.disabled=!0,h.disabled=!0,y.disabled=!0},v=(e,t=100,s=3e3)=>{d.powerup.play(),e.setStage("Downloading..."),e.setLoading(t,s),e.setAppears(t,s)},b=(e,t="Completed")=>{d.positive.play(),d.running.playing&&d.running.stop(),e.setStage(t),e.classList.add("idle"),e.setLoading(0,0)},w=(e,t=100,s=3e3)=>{d.powerup.play(),e.setStage("Parsing..."),e.classList.add("idle"),e.setLoading(t,s,"#22c222"),e.setTransparent(!1)},x=e=>{d.error.play(),e.classList.remove("idle"),e.setStage("Stopped"),e.setTransparent(),setTimeout((()=>e.setStage("Wait JS")),1500)},L=(e,t=100,s=3e3)=>{d.running.play(),e.setStage("Running JS"),e.classList.add("idle"),e.setLoading(t,s,"#c22")},S=e=>{d.positive.play(),e.disableBar(),e.classList.remove("idle")},k=()=>{c(""),d.end.play();const e=r.volume();r.volume()>0&&r.fade(.75,0,1500),setTimeout((()=>(r.stop(),r.volume(e),d.bubble.play(),void document.querySelectorAll("web-character").forEach((e=>e.remove())))),2e3),setTimeout((()=>(g.disabled=!1,p.disabled=!1,u.disabled=!1,h.disabled=!1,void(y.disabled=!1))),3e3)},E=e=>{let t=0;e.forEach((e=>{t+=e.time,setTimeout(e.stage,t)}))},T=e=>{const t=document.createElement("web-character");return t.setAttribute("type",e),m.appendChild(t),t},q=()=>{r.play(),c("normal &lt;script&gt;"),f();const e=T("html"),t=T("js"),s=[{stage:()=>v(t,100,3e3),time:1e4},{stage:()=>b(t),time:3e3},{stage:()=>L(t,100,3e3),time:1e3},{stage:()=>b(t),time:3e3},{stage:()=>S(t),time:1e3}];E([{stage:()=>v(e,100,3e3),time:0},{stage:()=>b(e),time:3e3},{stage:()=>w(e,50,3e3),time:2e3},{stage:()=>x(e),time:3e3},{stage:()=>w(e,100,3e3),time:11e3},{stage:()=>b(e),time:3e3},{stage:()=>S(e),time:1e3},{stage:()=>k(),time:1e3}]),E(s)},M=()=>{r.play(),c("&lt;script <em>defer</em>&gt;"),f();const e=T("html"),t=T("js"),s=[{stage:()=>v(t,100,3e3),time:7e3},{stage:()=>b(t,"Wait HTML"),time:3e3},{stage:()=>L(t,100,3e3),time:5e3},{stage:()=>b(t),time:3e3},{stage:()=>S(t),time:1e3},{stage:()=>k(),time:1e3}];E([{stage:()=>v(e,100,3e3),time:0},{stage:()=>b(e),time:3e3},{stage:()=>w(e,100,7e3),time:2e3},{stage:()=>b(e),time:9e3},{stage:()=>S(e),time:0}]),E(s)},$=()=>{r.play(),c("&lt;script <em>async</em>&gt;"),f();const e=T("html"),t=T("js"),s=[{stage:()=>v(t,100,3e3),time:7e3},{stage:()=>b(t),time:3e3},{stage:()=>L(t,100,3e3),time:3e3},{stage:()=>b(t),time:3e3},{stage:()=>S(t),time:1e3}];E([{stage:()=>v(e,100,3e3),time:0},{stage:()=>b(e),time:3e3},{stage:()=>w(e,50,5e3),time:2e3},{stage:()=>x(e),time:7e3},{stage:()=>w(e,100,3e3),time:6e3},{stage:()=>b(e),time:3e3},{stage:()=>S(e),time:1e3},{stage:()=>k(),time:1e3}]),E(s)},H=()=>{r.play(),c('&lt;script <em>type="module"</em>&gt;'),f();const e=T("html"),t=T("js"),s=T("module"),n=[{stage:()=>v(t,100,3e3),time:7e3},{stage:()=>b(t,"Wait HTML"),time:3e3},{stage:()=>L(t,100,3e3),time:5e3},{stage:()=>b(t),time:3e3},{stage:()=>S(t),time:1e3},{stage:()=>k(),time:1e3}],i=[{stage:()=>v(s,100,3e3),time:8e3},{stage:()=>b(s,"Wait JS"),time:3e3},{stage:()=>S(s),time:4e3}];E([{stage:()=>v(e,100,3e3),time:0},{stage:()=>b(e),time:3e3},{stage:()=>w(e,100,7e3),time:2e3},{stage:()=>b(e),time:9e3},{stage:()=>S(e),time:0}]),E(n),E(i)},R=()=>{r.play(),c('&lt;script <em>type="module" async</em>&gt;'),f();const e=T("html"),t=T("js"),s=T("module"),n=[{stage:()=>v(t,100,3e3),time:7e3},{stage:()=>b(t,"Wait HTML"),time:3e3},{stage:()=>L(t,100,3e3),time:3e3},{stage:()=>b(t),time:3e3},{stage:()=>S(t),time:4e3},{stage:()=>k(),time:4e3}],i=[{stage:()=>v(s,100,3e3),time:8e3},{stage:()=>b(s,"Wait JS"),time:3e3},{stage:()=>b(s),time:5e3},{stage:()=>S(s),time:4e3}];E([{stage:()=>v(e,100,3e3),time:0},{stage:()=>b(e),time:3e3},{stage:()=>w(e,75,7e3),time:2e3},{stage:()=>x(e),time:7e3},{stage:()=>w(e,100,2e3),time:6e3},{stage:()=>b(e),time:3e3},{stage:()=>S(e),time:1e3}]),E(n),E(i)};
